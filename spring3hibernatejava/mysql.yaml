# apiVersion: apps/v1
# kind: StatefulSet
# metadata:
#   name: mysql-statefulset
#   namespace: database
# spec:
#   serviceName: "mysql"
#   replicas: 1
#   selector:
#     matchLabels:
#       app: mysql-db
#   template:
#     metadata:
#       labels:
#         app: mysql-db
#     spec:
#       affinity:
#         nodeAffinity:
#           requiredDuringSchedulingIgnoredDuringExecution:
#             nodeSelectorTerms:
#             - matchExpressions:
#                 - key: app
#                   operator: In
#                   values:
#                     - database
#       containers:
#         - name: mysql-db
#           image: mysql:latest
#           env:
#             - name: MYSQL_ROOT_PASSWORD
#               valueFrom:
#                 secretKeyRef:
#                   name: mysql-secret
#                   key: mysql-root-password
#             - name: MYSQL_DATABASE
#               valueFrom:
#                 secretKeyRef:
#                   name: mysql-secret
#                   key: mysql-database
#             - name: MYSQL_USER
#               valueFrom:
#                 secretKeyRef:
#                   name: mysql-secret
#                   key: mysql-user
#             - name: MYSQL_PASSWORD
#               valueFrom:
#                 secretKeyRef:
#                   name: mysql-secret
#                   key: mysql-password
#           ports:
#             - containerPort: 3306
#           volumeMounts:
#             - mountPath: /var/lib/mysql
#               name: mysql-persistent-storage
#   volumeClaimTemplates:
#   - metadata:
#       name: mysql-persistent-storage
#     spec:
#       accessModes:
#         - ReadWriteOnce
#       resources:
#         requests:
#           storage: 10Gi
